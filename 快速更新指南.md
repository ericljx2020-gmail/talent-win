# ⚡ 快速更新指南

> 这是一个单页快速参考，适合打印或保存

## 📝 日常更新流程（4步）

```bash
# ========== 第1步：本地修改代码 ==========
# 在 /Users/eureka/Desktop/Projects/talent-win 修改文件

# ========== 第2步：提交到GitHub ==========
git add .
git commit -m "描述修改内容"
git push origin main

# ========== 第3步：连接服务器 ==========
ssh root@8.153.166.197

# ========== 第4步：更新部署 ==========
cd /root/talent-win && ./deploy-aliyun.sh
# 输入：2（更新部署）
```

## 🔧 常用命令

### 服务器管理
```bash
# 连接服务器
ssh root@8.153.166.197

# 进入项目目录
cd /root/talent-win

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f

# 重启服务
docker-compose restart

# 停止服务
docker-compose down

# 启动服务
docker-compose up -d
```

### Git操作
```bash
# 查看状态
git status

# 提交所有修改
git add . && git commit -m "说明"

# 推送到GitHub
git push origin main

# 拉取最新代码（在服务器上）
git pull origin main
```

### 故障排查
```bash
# 完全重启
docker-compose down
docker-compose up -d --build

# 清理空间
docker system prune -a -f

# 查看资源使用
docker stats talent-win-web

# 查看磁盘空间
df -h

# 查看内存
free -h
```

## 🌐 访问地址

- **网站地址：** http://8.153.166.197:8080
- **服务器IP：** 8.153.166.197

## 📞 紧急情况

### 网站打不开？
```bash
# 1. 检查容器状态
docker-compose ps

# 2. 重启容器
docker-compose restart

# 3. 查看错误日志
docker-compose logs --tail=100
```

### 需要回滚？
```bash
# 查看Git历史
git log --oneline

# 回滚到上一个版本
git reset --hard HEAD~1
docker-compose down
docker-compose up -d --build
```

### 磁盘满了？
```bash
# 清理Docker
docker system prune -a -f
docker volume prune -f

# 清理日志
journalctl --vacuum-time=7d

# 删除备份（小心操作）
rm -rf /root/talent-win-backup*
```

## ✅ 更新检查清单

- [ ] 本地代码已测试
- [ ] 已提交到Git
- [ ] 已推送到GitHub
- [ ] 在服务器上拉取更新
- [ ] 重新构建容器
- [ ] 检查容器状态正常
- [ ] 浏览器访问测试
- [ ] 清理浏览器缓存（Ctrl+Shift+R）

## 💡 小贴士

- **定期备份：** 更新前先备份
- **分批更新：** 不要一次改太多
- **测试后再推：** 本地测试通过再提交
- **写清注释：** Git提交信息要清楚
- **保留日志：** 出问题时方便排查

---

**详细文档：**
- `更新部署流程.md` - 完整更新流程
- `阿里云部署快速指南.md` - 部署和配置指南

**遇到问题？** 先查看日志：`docker-compose logs -f`

