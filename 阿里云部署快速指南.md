# é˜¿é‡Œäº‘éƒ¨ç½²å¿«é€ŸæŒ‡å—

## ðŸš€ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### å‡†å¤‡å·¥ä½œ

1. **è´­ä¹°é˜¿é‡Œäº‘ECSæœåŠ¡å™¨**
   - ç™»å½• https://ecs.console.aliyun.com
   - æŽ¨èé…ç½®ï¼š1æ ¸2GBï¼ŒUbuntu 22.04
   - è®°ä½ï¼šå…¬ç½‘IPåœ°å€å’Œç™»å½•å¯†ç 

2. **é…ç½®å®‰å…¨ç»„**
   - å¼€æ”¾ç«¯å£ï¼š22, 80, 443, 8080

### éƒ¨ç½²æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šè¿žæŽ¥åˆ°æœåŠ¡å™¨

```bash
# åœ¨æœ¬åœ°ç»ˆç«¯æ‰§è¡Œï¼ˆæ›¿æ¢ä¸ºä½ çš„ECS IPï¼‰
ssh root@your-ecs-ip

# è¾“å…¥å¯†ç ç™»å½•
```

#### ç¬¬äºŒæ­¥ï¼šä¸Šä¼ é¡¹ç›®æ–‡ä»¶

**æ–¹æ³•Aï¼šä½¿ç”¨Gitï¼ˆæŽ¨èï¼‰**

```bash
# åœ¨ECSæœåŠ¡å™¨ä¸Šæ‰§è¡Œ
apt update
apt install git -y

# å…‹éš†é¡¹ç›®ï¼ˆå¦‚æžœå·²ä¸Šä¼ åˆ°GitHubï¼‰
git clone https://github.com/your-username/talent-win.git
cd talent-win
```

**æ–¹æ³•Bï¼šä½¿ç”¨SCPä¸Šä¼ ï¼ˆå¦‚æžœæ²¡æœ‰Gitä»“åº“ï¼‰**

```bash
# åœ¨ä½ çš„æœ¬åœ°Macç”µè„‘æ‰§è¡Œ
cd /Users/eureka/Desktop/Projects/talent-win
tar -czf talent-win.tar.gz .

# ä¸Šä¼ åˆ°ECS
scp talent-win.tar.gz root@your-ecs-ip:/root/

# å›žåˆ°ECSæœåŠ¡å™¨
ssh root@your-ecs-ip
mkdir talent-win && cd talent-win
tar -xzf ../talent-win.tar.gz
```

#### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
# åœ¨ECSæœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•æ‰§è¡Œ
chmod +x deploy-aliyun.sh
./deploy-aliyun.sh

# é€‰æ‹©é€‰é¡¹1ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… å®‰è£…Dockerå’ŒDocker Compose
- âœ… é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ
- âœ… æž„å»ºå¹¶å¯åŠ¨åº”ç”¨
- âœ… æ˜¾ç¤ºè®¿é—®åœ°å€

#### ç¬¬å››æ­¥ï¼šè®¿é—®ç½‘ç«™

```
http://your-ecs-ip:8080
```

## ðŸ“ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°éƒ¨ç½²
./deploy-aliyun.sh
# é€‰æ‹©é€‰é¡¹2

# æŸ¥çœ‹å…¬ç½‘IP
curl ifconfig.me
```

## ðŸ”§ é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

### 1. åœ¨é˜¿é‡Œäº‘æ·»åŠ åŸŸåè§£æž

1. ç™»å½•é˜¿é‡Œäº‘æŽ§åˆ¶å°
2. åŸŸå â†’ åŸŸååˆ—è¡¨ â†’ è§£æž
3. æ·»åŠ è®°å½•ï¼š
   - è®°å½•ç±»åž‹ï¼šA
   - ä¸»æœºè®°å½•ï¼š@ æˆ– www
   - è®°å½•å€¼ï¼šä½ çš„ECSå…¬ç½‘IP
   - TTLï¼š10åˆ†é’Ÿ

### 2. ä¿®æ”¹ç«¯å£ä¸º80

ç¼–è¾‘ `docker-compose.yml`ï¼š

```yaml
ports:
  - "80:80"  # æ”¹ä¸º80ç«¯å£
```

é‡æ–°éƒ¨ç½²ï¼š

```bash
docker-compose down
docker-compose up -d
```

### 3. é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£…Certbot
apt install certbot python3-certbot-nginx -y

# èŽ·å–SSLè¯ä¹¦
certbot certonly --standalone -d your-domain.com

# è¯ä¹¦ä¼šä¿å­˜åœ¨ /etc/letsencrypt/live/your-domain.com/
```

## ðŸ’° æˆæœ¬ä¼°ç®—

**æœ€ä½Žé…ç½®ï¼ˆæµ‹è¯•/ä¸ªäººç½‘ç«™ï¼‰**
- ECSï¼š1æ ¸2GB = Â¥70/æœˆ
- å¸¦å®½ï¼š1Mbps = Â¥23/æœˆ
- **æ€»è®¡ï¼šçº¦Â¥93/æœˆ**

**æŽ¨èé…ç½®ï¼ˆå°åž‹ä¼ä¸šï¼‰**
- ECSï¼š2æ ¸4GB = Â¥140/æœˆ
- å¸¦å®½ï¼š5Mbps = Â¥115/æœˆ
- **æ€»è®¡ï¼šçº¦Â¥255/æœˆ**

ðŸ’¡ æç¤ºï¼š
- ä½¿ç”¨åŒ…å¹´åŒ…æœˆå¯äº«æŠ˜æ‰£
- æ–°ç”¨æˆ·æœ‰ä¼˜æƒ æ´»åŠ¨
- æŠ¢å å¼å®žä¾‹æ›´ä¾¿å®œï¼ˆä¸ä¿è¯ç¨³å®šï¼‰

## ðŸ› ï¸ å¸¸è§é—®é¢˜

### Dockeré•œåƒæ‹‰å–å¤±è´¥ï¼Ÿ

å¦‚æžœé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
```
failed to solve: nginx:alpine: pull access denied, repository does not exist or may require authorization
```

**åŽŸå› ï¼š** ä»Žä¸­å›½å¤§é™†è®¿é—® Docker Hub å—é™

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# 1. é…ç½®å¤šä¸ªDockeré•œåƒåŠ é€Ÿå™¨
sudo tee /etc/docker/daemon.json > /dev/null <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.nju.edu.cn",
    "https://hub.rat.dev",
    "https://registry.cn-hangzhou.aliyuncs.com",
    "https://docker.mirrors.ustc.edu.cn",
    "https://dockerproxy.com"
  ]
}
EOF

# 2. é‡å¯DockeræœåŠ¡
sudo systemctl daemon-reload
sudo systemctl restart docker

# 3. éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
docker info | grep -A 10 "Registry Mirrors"

# 4. é‡æ–°éƒ¨ç½²
./deploy-aliyun.sh
# é€‰æ‹©é€‰é¡¹1
```

### æ— æ³•è®¿é—®ç½‘ç«™ï¼Ÿ

1. **æ£€æŸ¥å®‰å…¨ç»„è§„åˆ™**
   - é˜¿é‡Œäº‘æŽ§åˆ¶å° â†’ ECS â†’ å®‰å…¨ç»„
   - ç¡®ä¿8080ç«¯å£å·²å¼€æ”¾

2. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**
   ```bash
   docker-compose ps
   # åº”è¯¥æ˜¾ç¤º Up çŠ¶æ€
   ```

3. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   docker-compose logs
   ```

### ç«¯å£è¢«å ç”¨ï¼Ÿ

```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -tunlp | grep 8080

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 [è¿›ç¨‹ID]
```

### å†…å­˜ä¸è¶³ï¼Ÿ

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æ¸…ç†Dockerå ç”¨
docker system prune -a
```

### æ›´æ–°ä»£ç åŽå¦‚ä½•é‡æ–°éƒ¨ç½²ï¼Ÿ

**æŽ¨èæµç¨‹ï¼ˆä½¿ç”¨Gitï¼‰ï¼š**

```bash
# 1. åœ¨æœ¬åœ°Macä¿®æ”¹ä»£ç åŽæäº¤
cd /Users/eureka/Desktop/Projects/talent-win
git add .
git commit -m "æ›´æ–°è¯´æ˜Ž"
git push origin main

# 2. SSHç™»å½•åˆ°æœåŠ¡å™¨
ssh root@8.153.166.197

# 3. æ›´æ–°éƒ¨ç½²
cd /root/talent-win
./deploy-aliyun.sh
# é€‰æ‹©é€‰é¡¹2ï¼ˆæ›´æ–°éƒ¨ç½²ï¼‰

# 4. éªŒè¯æ›´æ–°
docker-compose ps
docker-compose logs -f --tail=50
# è®¿é—®ï¼šhttp://8.153.166.197:8080
```

**æ‰‹åŠ¨æ‰§è¡Œï¼š**
```bash
cd /root/talent-win
git pull origin main
docker-compose down
docker-compose up -d --build
docker image prune -f
```

**ðŸ“– è¯¦ç»†æµç¨‹è¯·å‚è€ƒï¼š`æ›´æ–°éƒ¨ç½²æµç¨‹.md`**

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å¯ç”¨CDNåŠ é€Ÿ

- é˜¿é‡Œäº‘CDNæŽ§åˆ¶å°
- æ·»åŠ ä½ çš„åŸŸå
- æºç«™å¡«å†™ECS IP
- é…ç½®ç¼“å­˜è§„åˆ™

### 2. é…ç½®ç›‘æŽ§å‘Šè­¦

- äº‘ç›‘æŽ§ â†’ ä¸»æœºç›‘æŽ§
- æ·»åŠ å‘Šè­¦è§„åˆ™ï¼ˆCPU > 80%ã€å†…å­˜ > 90%ç­‰ï¼‰

### 3. å®šæœŸå¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d)
tar -czf backup-$DATE.tar.gz /root/talent-win
# å¯ä»¥ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSS
EOF

chmod +x backup.sh

# æ·»åŠ å®šæ—¶ä»»åŠ¡
crontab -e
# æ·»åŠ ï¼š0 2 * * * /root/backup.sh
```

## ðŸ” å®‰å…¨å»ºè®®

1. **ä¿®æ”¹SSHé»˜è®¤ç«¯å£**
2. **é…ç½®é˜²ç«å¢™è§„åˆ™**
3. **å®šæœŸæ›´æ–°ç³»ç»Ÿ**
   ```bash
   apt update && apt upgrade -y
   ```
4. **ä½¿ç”¨å¯†é’¥ç™»å½•ä»£æ›¿å¯†ç **
5. **é…ç½®HTTPSè¯ä¹¦**

## ðŸ“ž èŽ·å–å¸®åŠ©

- é˜¿é‡Œäº‘æ–‡æ¡£ä¸­å¿ƒï¼šhttps://help.aliyun.com
- ECSäº§å“æ–‡æ¡£ï¼šhttps://help.aliyun.com/product/25365.html
- å·¥å•ç³»ç»Ÿï¼šé˜¿é‡Œäº‘æŽ§åˆ¶å° â†’ å·¥å•

## ðŸ“š ä¸‹ä¸€æ­¥

1. âœ… éƒ¨ç½²æˆåŠŸåŽï¼Œé…ç½®EmailJSï¼ˆå‚è€ƒ `EMAILJS_SETUP.md`ï¼‰
2. âœ… ç»‘å®šåŸŸåå¹¶é…ç½®SSL
3. âœ… è®¾ç½®CDNåŠ é€Ÿ
4. âœ… é…ç½®ç›‘æŽ§å’Œå¤‡ä»½
5. âœ… ä¼˜åŒ–ç½‘ç«™å†…å®¹å’Œå›¾ç‰‡

---

**å¿«é€Ÿå‘½ä»¤å‚è€ƒ**

```bash
# éƒ¨ç½²
./deploy-aliyun.sh

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯
docker-compose restart

# åœæ­¢
docker-compose down

# æŸ¥çœ‹IP
curl ifconfig.me
```

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ðŸŽ‰

